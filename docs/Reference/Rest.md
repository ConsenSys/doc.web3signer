---
description: Web3Signer RESTful API's
---

# REST API

## View the REST API documentation

View the [REST API documentation] for more information about the available APIs.

## Enable Swagger UI

You can also interact with APIs using [Swagger UI]. To do this, set
[`--swagger-ui-enabled`](CLI/CLI-Syntax.md#swagger-ui-enabled) to `true`.

Access Swagger UI at `http:<interface>:<port>/swagger-ui` where:

* `interface` is specified using [`--http-listen-host`](CLI/CLI-Syntax.md#http-listen-host)
* `port` is specified using [`http-listen-port`](CLI/CLI-Syntax.md#http-listen-port)

The default location is `http://localhost:9000/swagger-ui`.

You can also use tools such as [Postman] or [cURL] to interact with Web3Signer APIs.

## Endpoint examples

### `/api/v1/eth2/publicKeys`

Returns a hex-encoded list of ETH2 BLS public keys for the private keys that have been loaded into Web3Signer.

!!! example

    === "curl request"

        ```bash
        curl -X GET http://localhost:9000/api/v1/eth2/publicKeys
        ```

    === "JSON result"

        ```json
        [
        "0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a"
        ]
        ```

### `/api/v1/eth2/sign/{identifier}`

Signs data for the ETH2 BLS public key specified as part of the URL and returns the signature.

#### Path Parameter

`identifier`: *string* - Key for which data to sign

#### Body Parameters

The request body has a `type` which defines the remaining parameters in the body.
The following example uses `"type": "AGGREGATION_SLOT"`.
Refer to the [API documentation](https://consensys.github.io/web3signer/web3signer-eth2.html#operation/ETH2_SIGN) for more information on the types.

!!! example

    === "curl request"

        ```bash
        curl -X POST http://127.0.0.1:9000/api/v1/eth2/sign/{identifier} --header "Content-Type: application/json"
        --data '{
          "type": "AGGREGATION_SLOT",
          "fork_info": {
            "fork": {
              "previous_version": "string",
              "current_version": "string",
              "epoch": "string"
            },
            "genesis_validators_root": "string"
          },
          "signingRoot": "string",
          "aggregation_slot": {
            "slot": "string"
          }
        }'
        ```

    === "JSON result"

        ```json
        {
          "signature": "0xb3baa751d0a9132cfe93e4e3d5ff9075111100e3789dca219ade5a24d27e19d16b3353149da1833e9b691bb38634e8dc04469be7032132906c927d7e1a49b414730612877bc6b2810c8f202daf793d1ab0d6b5cb21d52f9e52e883859887a5d9"
        }
        ```

### `/reload`

Reloads signer keys asynchronously.
This is used after adding new keys to a current set of validators.
The call reloads the keys and makes Web3signer aware of the change.
Not used by validator clients.

!!! example

    === "curl request"

        ```bash
        curl -X POST http://localhost:9000/reload
        ```

    === "JSON result"

        ```json
        200 Call is successful
        ```

### `/upcheck`

Checks the Web3Signer server status.
Confirms if Web3Signer is connected and running.
Not used by validator clients.

!!! example

    === "curl request"

        ```bash
        curl -X GET http://localhost:9000/upcheck
        ```

    === "JSON result"

        ```json
        200 OK
        ```

## Key manager API

The [key manager API](https://consensys.github.io/web3signer/web3signer-eth2.html#tag/Keymanager) is a subset of API methods used to manage the keys in Web3Signer.
You can [list keys](#list-keys), [import keystores](#import-keystores), and [delete keys](#delete-keys).

Enable the key manager API by running Web3Signer with the [`--key-manager-api-enabled` subcommand](CLI/CLI-Subcommands.md#key-manager-api-enabled).


### List keys

Lists all validating public keys known to and decrypted by this keystore binary.

!!! example

    === "curl request"

        ```bash
        curl -X GET http://localhost:9000/eth/v1/keystores
        ```

    === "JSON result"

        ```json
        {
          "data": [
            {
              "validating_pubkey": "0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a",
              "derivation_path": "m/12381/3600/0/0/0",
              "readonly": true
            }
          ]
        }
        ```

### Import keystores

Imports keystores generated by the Eth2.0 deposit CLI tooling.

#### parameters

`keystores`: *array of strings* - JSON-encoded keystore files generated with the Launchpad

`passwords`: *array of strings* - Passwords to unlock imported keystore files

`slashing_protection`: *string* - JSON serialized representation of the slash protection data in format defined in
EIP-3076: Slashing Protection Interchange Format

!!! example

    === "curl request"

        ```bash
        curl -X POST http://127.0.0.1:9000/eth/v1/keystores --header "Content-Type: application/json"
        --data '{
          "keystores": [
            "{\"version\":4,\"uuid\":\"9f75a3fa-1e5a-49f9-be3d-f5a19779c6fa\",\"path\":\"m/12381/3600/0/0/0\",\"pubkey\":\"0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a\",\"crypto\":{\"kdf\":{\"function\":\"pbkdf2\",\"params\":{\"dklen\":32,\"c\":262144,\"prf\":\"hmac-sha256\",\"salt\":\"8ff8f22ef522a40f99c6ce07fdcfc1db489d54dfbc6ec35613edf5d836fa1407\"},\"message\":\"\"},\"checksum\":{\"function\":\"sha256\",\"params\":{},\"message\":\"9678a69833d2576e3461dd5fa80f6ac73935ae30d69d07659a709b3cd3eddbe3\"},\"cipher\":{\"function\":\"aes-128-ctr\",\"params\":{\"iv\":\"31b69f0ac97261e44141b26aa0da693f\"},\"message\":\"e8228bafec4fcbaca3b827e586daad381d53339155b034e5eaae676b715ab05e\"}}}"
          ],
          "passwords": [
            "ABCDEFGH01234567ABCDEFGH01234567"
          ],
            "slashing_protection": "{\"metadata\":{\"interchange_format_version\":\"5\",\"genesis_validators_root\":\"0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2\"},\"data\":[{\"pubkey\":\"0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a\",\"signed_blocks\":[],\"signed_attestations\":[]}]}"
          }'
        ```

    === "JSON response"

        ```json
        {
          "data": [
            {
              "status": "imported",
              "message": "string"
            }
          ]
        }
        ```

### Delete keys

Deletes all keys from `request.pubkeys` that are known to the key manager and exist in its persistent storage.

#### Parameters

`pubkeys`: *array of strings* - List of public keys to delete

!!! example

    === "curl request"

        ```bash
        curl -X DELETE http://localhost:9000/eth/v1/keystores --data '{"pubkeys": ["0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a"]}'
        ```

    === "JSON response"

        ```json
        {
          "data": [
            {
              "status": "deleted",
              "message": "string"
            }
          ],
          "slashing_protection": "{\"metadata\":{\"interchange_format_version\":\"5\",\"genesis_validators_root\":\"0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2\"},\"data\":[{\"pubkey\":\"0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a\",\"signed_blocks\":[],\"signed_attestations\":[]}]}"
        }
        ```

<!-- Links -->
[REST API documentation]: https://consensys.github.io/web3signer/
[Postman]: https://www.postman.com/
[cURL]: https://curl.haxx.se/
[Swagger UI]: https://swagger.io/tools/swagger-ui/
